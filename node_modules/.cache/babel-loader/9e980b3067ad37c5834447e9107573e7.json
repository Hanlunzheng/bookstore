{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{Link}from'react-router-dom';import Rating from'./Rating';import Price from'./Price';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Book=_ref=>{let{book}=_ref;const[img,setImg]=useState();const mountedRef=useRef(true);useEffect(()=>{const image=new Image();image.src=book.url;image.onload=()=>{setTimeout(()=>{if(mountedRef.current){setImg(image);}},300);};return()=>{mountedRef.current=false;};});return/*#__PURE__*/_jsx(\"div\",{className:\"book\",children:img?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(book.id),children:/*#__PURE__*/_jsx(\"figure\",{className:\"book__img--wrapper\",children:/*#__PURE__*/_jsx(\"img\",{src:img.src,alt:\"\",className:\"book__wrapper\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"book__title\",children:/*#__PURE__*/_jsx(Link,{to:\"/books/\".concat(book.id),className:\"book__title--link\",children:book.title})}),/*#__PURE__*/_jsx(Rating,{rating:book.rating}),/*#__PURE__*/_jsx(Price,{salePrice:book.salePrice,originalPrice:book.originalPrice})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"book__img--skeleton\"}),/*#__PURE__*/_jsx(\"div\",{className:\"skeleton book__title--skeleton\"}),/*#__PURE__*/_jsx(\"div\",{className:\"skeleton book__rating--skeleton\"}),/*#__PURE__*/_jsx(\"div\",{className:\"skeleton book__price--skeleton\"})]})});};export default Book;","map":{"version":3,"sources":["/Users/hanlunzheng/Desktop/practiceProject/OnlineBookStore/src/components/ui/Book.jsx"],"names":["React","useEffect","useRef","useState","FontAwesomeIcon","Link","Rating","Price","Book","book","img","setImg","mountedRef","image","Image","src","url","onload","setTimeout","current","id","title","rating","salePrice","originalPrice"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,MAA3B,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,eAAT,KAAgC,gCAAhC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,C,+EACA,KAAMC,CAAAA,IAAI,CAAG,MAAc,IAAb,CAAEC,IAAF,CAAa,MACvB,KAAM,CAACC,GAAD,CAAMC,MAAN,EAAgBR,QAAQ,EAA9B,CAEA,KAAMS,CAAAA,UAAU,CAAGV,MAAM,CAAC,IAAD,CAAzB,CAEAD,SAAS,CAAC,IAAM,CACZ,KAAMY,CAAAA,KAAK,CAAG,GAAIC,CAAAA,KAAJ,EAAd,CACAD,KAAK,CAACE,GAAN,CAAYN,IAAI,CAACO,GAAjB,CACAH,KAAK,CAACI,MAAN,CAAe,IAAM,CACjBC,UAAU,CAAC,IAAM,CACb,GAAGN,UAAU,CAACO,OAAd,CAAuB,CACnBR,MAAM,CAACE,KAAD,CAAN,CACH,CACJ,CAJS,CAIP,GAJO,CAAV,CAMH,CAPD,CAQA,MAAO,IAAM,CACTD,UAAU,CAACO,OAAX,CAAqB,KAArB,CACH,CAFD,CAGH,CAdQ,CAAT,CAeA,mBAEI,YAAK,SAAS,CAAC,MAAf,UAEQT,GAAG,cAAG,wCAAE,KAAC,IAAD,EAAM,EAAE,kBAAYD,IAAI,CAACW,EAAjB,CAAR,uBACJ,eAAQ,SAAS,CAAC,oBAAlB,uBACI,YAAK,GAAG,CAAEV,GAAG,CAACK,GAAd,CAAmB,GAAG,CAAC,EAAvB,CAA0B,SAAS,CAAC,eAApC,EADJ,EADI,EAAF,cAKF,YAAK,SAAS,CAAC,aAAf,uBACI,KAAC,IAAD,EAAM,EAAE,kBAAYN,IAAI,CAACW,EAAjB,CAAR,CAA+B,SAAS,CAAC,mBAAzC,UACKX,IAAI,CAACY,KADV,EADJ,EALE,cAUF,KAAC,MAAD,EAAQ,MAAM,CAAEZ,IAAI,CAACa,MAArB,EAVE,cAWF,KAAC,KAAD,EAAO,SAAS,CAAEb,IAAI,CAACc,SAAvB,CAAkC,aAAa,CAAEd,IAAI,CAACe,aAAtD,EAXE,GAAH,cAYO,wCACN,YAAK,SAAS,CAAC,qBAAf,EADM,cAEN,YAAK,SAAS,CAAC,gCAAf,EAFM,cAGN,YAAK,SAAS,CAAC,iCAAf,EAHM,cAIN,YAAK,SAAS,CAAC,gCAAf,EAJM,GAdlB,EAFJ,CA2BH,CA/CD,CAiDA,cAAehB,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { Link } from 'react-router-dom';\nimport Rating from './Rating';\nimport Price from './Price';\nconst Book = ({ book }) => {\n    const [img, setImg] = useState()\n\n    const mountedRef = useRef(true)\n\n    useEffect(() => {\n        const image = new Image();\n        image.src = book.url\n        image.onload = () => {\n            setTimeout(() => {\n                if(mountedRef.current) {\n                    setImg(image);\n                }\n            }, 300)\n            \n        }\n        return () => {\n            mountedRef.current = false\n        }\n    })\n    return (\n\n        <div className=\"book\">\n            {\n                img ? <><Link to={`/books/${book.id}`}>\n                    <figure className=\"book__img--wrapper\">\n                        <img src={img.src} alt=\"\" className=\"book__wrapper\"  />\n                    </figure>\n                </Link>\n                    <div className=\"book__title\">\n                        <Link to={`/books/${book.id}`} className='book__title--link'>\n                            {book.title}\n                        </Link>\n                    </div>\n                    <Rating rating={book.rating} />\n                    <Price salePrice={book.salePrice} originalPrice={book.originalPrice} />\n                    </> : <>\n                    <div className=\"book__img--skeleton\"></div>\n                    <div className=\"skeleton book__title--skeleton\"></div>\n                    <div className=\"skeleton book__rating--skeleton\"></div>\n                    <div className=\"skeleton book__price--skeleton\"></div>\n                    </>\n            }\n            \n            \n        </div>\n    );\n}\n\nexport default Book;\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}